# Hashtable

## 综述

1. 哈希表又叫散列表，关键值通过哈希函数映射到数组上，查找时通过关键值直接访问数组。
2. 哈希函数指的是关键值和存储位置建立的对应关系， 查找时只要根据这个关系就能找到目标位置。一般我们只要通过一次查找就能找到目标位置，但有些关键字需要多次比较和查找才能找到，这是为什么呢？因为哈希表里，可能存在关键字不同但是哈希地址相同的情况，也就是产生了冲突。一般情况下，冲突是不可避免的，因为关键字集合往往比哈希地址集合大很多。

![img](https://wx2.sinaimg.cn/mw690/005LasY6gy1gc244gchvcj319k0fadnt.jpg)

3. 要提高哈希表的查找效率，关键在于合理地构造哈希函数和优秀的解决冲突的方法。

## 哈希函数

1. 哈希函数的优劣直接影响到哈希表查找的效率，优秀的哈希函数可以减少冲突的发生，哈希表里的元素可以是不同类型的，也可以是不同规律的，所以不同情况下哈希函数的设计也是不同的。

2. 常见构造方法：

   + 直接寻址法

     即取关键字的值或者关键字的某个函数变换值，线性地映射到存储地址上。如果关键字的数量和跨度不是很大，直接寻址法是最简单有效的构造方法了，并且还可以避免冲突。但是如果关键字的数量和跨度很大的话，这种方法就用不了了，例如有n个关键字，值最小的为0，最大的为pow(10, 10)，这种情况下就不能用直接寻址法了，因为没有足够的空间可以用来存储。

   + 除留余数法

     我们将关键字对整数p取的余数直接作为存储地址，整数p一般取小于等于哈希表长度size的最大质数，如果关键字不是整数，比如是一个字符串，可以先将其做个转换，然后再对p取余。选择优秀的p可以减少冲突的发生。

   + 分析数字法、随机数法……

3. 设计哈希函数没有统一的方法，同一个哈希函数不一定能使用所有问题，其产生的影响也是不一样的。但哈希函数的设计又是至关重要的，那么我们应该如何设计呢？一般来说，设计哈希函数时要达到两个要求：

   + 计算简单

     计算复杂的哈希函数会增加查询的时间。

   + 关键字尽可能地均分到存储地址上，这样可以减少冲突。